!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={exports:{},id:a,loaded:!1};return e[a].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="/assets/",t(0)}([function(e,t,n){e.exports=n(3)},function(e,t,n){var a=n(7)["default"];t["default"]={findMentionTrigger:function(e){var t,n,a,r,o,i=document,s=i.defaultView||i.parentWindow,d=s.getSelection(),u="",f=0,c=0;for(t=d.getRangeAt(0),n=t.cloneRange(),a=t.endContainer,n.selectNodeContents(t.endContainer);a!=e&&null!=a.previousSibling&&3==a.previousSibling.nodeType;)console.log(a,a.previousSibling),a=a.previousSibling;if(n.setStart(a,0),a.data){var l=a.data.search(/\s/);(l<0||l<t.endOffset)&&(l=a.data.length),l>t.endOffset?n.setEnd(a,l):n.setEnd(t.endContainer,t.endOffset)}u=n.toString();var p=u.lastIndexOf("@");return p<0?{index:p}:(n.setStart(a,p),n.collapse(!0),r=n.getClientRects(),r.length>0&&(o=n.getClientRects()[0],f=o.left+s.pageXOffset,c=o.top+s.pageYOffset),{index:p,data:u.slice(p+1,u.length),x:f,y:c})},selectMention:function(){var e,t,n,a=document,r=a.defaultView||a.parentWindow,o=r.getSelection();for(e=o.getRangeAt(0),t=e.cloneRange(),n=e.endContainer,t.selectNodeContents(e.endContainer);null!=n.previousSibling&&3==n.previousSibling.nodeType&&n.data.search(/@/)<0;)n=n.previousSibling;t.setStart(n,n.data.lastIndexOf("@",e.endOffset));var i=e.endContainer.data.search(/\s/);(i<0||i<e.endOffset)&&(i=e.endContainer.data.length),i>e.endOffset?t.setEnd(e.endContainer,i):t.setEnd(e.endContainer,e.endOffset),o.addRange(t)},getCaretPosition:function(e){var t=0,n=e.ownerDocument||e.document,a=n.defaultView||n.parentWindow,r=a.getSelection();if(r.rangeCount>0){var o=r.getRangeAt(0),i=o.cloneRange();i.selectNodeContents(e),i.setEnd(o.endContainer,o.endOffset),t=i.toString().length}return t},moveCaret:function(e,t){var n=window.getSelection(),a=document.createRange();a.selectNodeContents(e),t&&(a.setStart(e,0),a.setEnd(e,0)),a.collapse(!1),n.removeAllRanges(),n.addRange(a)},moveCaretBefore:function(e){var t=document.createTextNode(" ");$(t).insertBefore(e),this.moveCaret(t,!0)},moveCaretAfter:function(e){var t=document.createTextNode(" ");$(t).insertAfter(e),this.moveCaret(t,!1)},insertNodeOverSelection:function(e,t){var n,a=window.getSelection();a.getRangeAt&&a.rangeCount&&(n=a.getRangeAt(0),$.contains(t[0],n.commonAncestorContainer)?(n.deleteContents(),n.insertNode(e)):t.append(e)),this.moveCaretAfter(e)},getParentPosition:function(e){var t,n=$(e),a=0,r=0;return n.is(n.offsetParent())||(n=n.offsetParent(),t=n.offset(),a+=t.left,r+=t.top),{x:a,y:r}},trim:function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},jaso:function(e){return a(e)}}},function(e,t){e.exports=jQuery},function(e,t,n){var a=n(2),r=n(4)["default"];a.fn.editor=function(e){if(this.is("textarea")||a.error("not textarea"),this.length>0)return a.data(this[0],"editor")||a.data(this[0],"editor",r(this,e))}},function(e,t,n){var a=n(6)["default"],r=n(1)["default"],o=n(5)["default"],i=n(2);t["default"]=function(e,t){var n,s,d,u=i(e),f=t||{},c=null,l=function(e){n&&(c&&c.view().remove(),c=a(e,C),u.parent().parent().append(c.view()),c.hide())},p=function(e,t){n&&c&&c.add(e,t)},v=function(){if("undefined"!=typeof window.getSelection){var e=f.mentions||[],t=f.value||u.val();d=f.maxLength||u.attr("maxlength")||1e3,n=i("<div contenteditable></div>"),n.html(S(t)),n.attr("class",u.attr("class")),n.insertBefore(u),s=i("<div class='editor_placeholder'></div>"),s.html(u.attr("placeholder")),s.insertBefore(u),h(),u.hide(),l(e),n.on("paste",A),n.on("drop",D),n.on("keyup",O),n.on("keydown",y)}},g=function(){n?(n.html(""),h()):u.val("")},h=function(){n.text().length>0?s.hide():s.show()},m=function(){n?n.focus():u.focus()},C=function(e){e&&(r.selectMention(),r.insertNodeOverSelection(i("<span class='_mention' data-id='"+e.userId+"'>@"+e.userName+"</span>")[0],n))},x=function(e){if(e.index<0)return void c.hide();var t,a=e.data,r={};n.find("span[data-id]").each(function(){var e=i(this);r[e.data("id")]=e.text()}),f.floatMention&&(t={x:e.x,y:e.y+20}),c.search(a,r,t)},E=function(){return n?w(n):u.val()},w=function(e){var t,n,a,r,o=[],s=i(e).contents(),d=function(e){return e&&("DIV"==e.nodeName||"P"==e.nodeName)},u=function(e){return e&&"BR"==e.nodeName};if(d(e)&&1==s.length&&u(s[0]))return"";for(t=0;t<s.length;t++)n=s[t],n.nodeType!=Node.TEXT_NODE?(r=i(n).data("id"),r?o.push("@["+r+"]"):(0!=t&&d(n)&&!d(a)&&o.push("\n"),o.push(w(n)),(d(n)||u(n))&&o.push("\n"),a=n)):o.push(n.data);return o.join("")},N=function(){var e=[];return n&&n.find("span[data-id]").each(function(){var t=i(this);e.push({id:t.data("id"),name:t.text()})}),e},S=function(e){return e.replace(/@\[([^\]]+):([^\]]+)\]/g,"<span class='_mention' data-id='$1'>@$2</span>").replace(/\\/g,"")},A=function(e){e.preventDefault();var t,n=length=d-E().length;(e.originalEvent||e).clipboardData?(t=(e.originalEvent||e).clipboardData.getData("text/plain"),t=t.substring(0,n),document.execCommand("insertText",!1,t)):window.clipboardData&&(t=window.clipboardData.getData("Text"),t=t.substring(0,n),document.selection.createRange().pasteHTML(t))},D=function(e){return e.preventDefault(),!1},O=function(e){switch(e.keyCode){case o.ESC:case o.UP:case o.DOWN:case o.TAB:case o.RETURN:return}x(r.findMentionTrigger(n)),h()},y=function(e){if(!e.ctrlKey&&!e.metaKey){switch(e.keyCode){case o.ESC:return void(c.isVisible()&&(c.hide(),e.preventDefault()));case o.UP:return void(c.isVisible()&&(c.prev(),e.preventDefault()));case o.DOWN:case o.TAB:return void(c.isVisible()&&(c.next(),e.preventDefault()));case o.RETURN:if(c.isVisible())return c.select(),void e.preventDefault();break;case o.LEFT:case o.RIGHT:case o.HOME:case o.END:case o.PAGEUP:case o.PAGEDOWN:return}var t=E().length;if(t>d)return void e.preventDefault();var n=window.getSelection().anchorNode;if(n=3==n.nodeType?n.parentNode:n,"SPAN"==n.tagName){switch(e.keyCode){case o.BACKSPACE:case o.DELETE:return e.preventDefault(),void i(n).remove()}var a=r.getCaretPosition(n);0==a?r.moveCaretBefore(n):r.moveCaretAfter(n)}}};return v(),{value:function(){return E()},mentions:function(){return N()},initMentions:function(e){l(e)},addMention:function(e,t){p(e,t)},reset:function(){g()},focus:function(){m()}}}},function(e,t){t["default"]={BACKSPACE:8,DELETE:46,TAB:9,RETURN:13,ESC:27,COMMA:188,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40}},function(e,t,n){var a=n(1)["default"];t["default"]=function(e,t){var n=$("<ul class='_mention_list'></ul>"),r=[],o=[],i={},s=e||[],d={},u=t,f=0,c=function(){var e,t;for(e=0;e<s.length;e++)t=s[e],t.jaso=a.jaso(t.userName),d[t.userId]=t;n.on("mousedown",w),n.delegate("li","mouseover",N)},l=function(e,t){d[e.userId]||(e.jaso=a.jaso(e.userName),s.push(e),d[e.userId]=e),t&&!i[e.userId]&&(o.push(e),i[e.userId]=e)},p=function(e){var t=$("<li><span class='comment_profile'><img class='image' src='"+e.userImage+"'></span><span class='text'>"+e.userName+"</span></li>");return t.data("id",e.userId),t},v=function(){x(r.length>f+1?f+1:0)},g=function(){f-1>=0&&x(f-1)},h=function(){if(r.length>f){var e=r[f];u(d[e.data("id")])}E()},m=function(e,t,n){var r,i,d=[];if(e=e?a.trim(e):"",e&&0!=e.length){var u=a.jaso(e);for(r=0;r<s.length;r++)i=s[r],!t[i.userId]&&(i.userName.toUpperCase().indexOf(e.toUpperCase())>-1||i.jaso.indexOf(u)>-1)&&d.push(i)}else for(r=0;r<o.length;r++)i=o[r],!t[i.userId]&&(i.userName.toUpperCase().indexOf(e.toUpperCase())>-1||i.jaso.indexOf(u)>-1)&&d.push(i);d.length>0?C(d,n):E()},C=function(e,t){console.log(t);var o,i;for(n.empty(),r=[],o=0;o<e.length;o++)i=p(e[o]),n.append(i),r.push(i);if(x(0),n.show(),t){var s=a.getParentPosition(n),d=t.x-s.x,u=t.y-s.y;n.css({left:d+"px",top:u+"px"})}},x=function(e){r.length>e&&(r.length>f&&r[f].removeClass("select"),f=e,r[e].addClass("select"))},E=function(){r=[],n.hide(),n.empty()},w=function(e){e.preventDefault(),h()},N=function(e){x($(this).index())};return c(),{view:function(){return n},added:function(){return _addedList},next:function(){v()},prev:function(){g()},select:function(){h()},isVisible:function(){return $.expr.filters.visible(n[0])},hide:function(){E()},search:function(e,t,n){m(e,t||{},n)},add:function(e,t){l(e,t)}}}},function(e,t){t["default"]=function(e){for(var t=new Array(12593,12594,12596,12599,12600,12601,12609,12610,12611,12613,12614,12615,12616,12617,12618,12619,12620,12621,12622),n=new Array(12623,12624,12625,12626,12627,12628,12629,12630,12631,12632,12633,12634,12635,12636,12637,12638,12639,12640,12641,12642,12643),a=new Array(0,12593,12594,12595,12596,12597,12598,12599,12601,12602,12603,12604,12605,12606,12607,12608,12609,12610,12612,12613,12614,12615,12616,12618,12619,12620,12621,12622),r=new Array,o=new Array,i=0;i<e.length;i++)if(r[i]=e.charCodeAt(i),r[i]>=44032&&r[i]<=55203){var s,d,u;u=r[i]-44032,s=u/588,u%=588,d=u/28,u%=28,o.push(String.fromCharCode(t[parseInt(s)])),o.push(String.fromCharCode(n[parseInt(d)])),0!=u&&o.push(String.fromCharCode(a[parseInt(u)]))}else o.push(String.fromCharCode(r[i]));return o.join("")}}]);